%% -*- erlang -*-
%% Config file for bt-application
%%
%%
{deps, [ {dthread, ".*", {git, "git@github.com:tonyrog/dthread.git"}}]}.
{erl_opts, [debug_info, fail_on_warning]}.

{port_env, [
	    {"CFLAGS", "$CFLAGS -Wall -Wextra -Wswitch-default -Wswitch-enum -fno-common -I ../dthread/include"},
	    {"(darwin)", "CFLAGS", "$CFLAGS -ObjC "},
	    {"(darwin)", "LDFLAGS", "$LDFLAGS -framework IOBluetooth -framework CoreFoundation -framework Foundation"}
	    ]}.

%% first version is a regular port program
{port_specs, [
	      {"(darwin)", "priv/bt", [ "c_src/bt_macos_drv.c" ]},
	      {"(linux)", "priv/bt",  [ "c_src/bt_linux_drv.c" ]}
	     ]}.
